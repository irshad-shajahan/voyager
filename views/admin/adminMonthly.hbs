<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Tables / General - NiceAdmin Bootstrap Template</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="/admin/images/favicon.png" rel="icon">
    <link href="/admin/images/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/admin/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/admin/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/admin/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="/admin/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="/admin/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="/admin/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="/admin/vendor/simple-datatables/style.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/eed1365ac8.js" crossorigin="anonymous"></script>
    <!-- CSS only -->
    <!-- JavaScript Bundle with Popper -->




    <!-- Template Main CSS File -->
    <link href="/admin/stylesheets/style.css" rel="stylesheet">

    <!-- =======================================================
  * Template Name: NiceAdmin - v2.4.1
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
    <script src="https://code.jquery.com/jquery-3.6.1.js"
        integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <script src="/admin/javascripts/sweetalert2.all.js"></script>
    <style>
        .dt-buttons {
            margin-bottom: 30px;

        }

        .buttons-pdf {
            background-color: rgb(0, 0, 0);
            border: 0;
            border-radius: 5px;
            color: white;
        }

        .buttons-print {
            background-color: rgb(0, 0, 0);
            border: 0;
            border-radius: 5px;
            color: white;
        }

        .buttons-excel {
            background-color: rgb(0, 0, 0);
            border: 0;
            border-radius: 5px;
            color: white;
        }

        .buttons-csv {
            background-color: rgb(0, 0, 0);
            border: 0;
            border-radius: 5px;
            color: white;
        }
    </style>
</head>

<body>
    {{>adminheader}}
    {{>adminsidebar}}
    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Sales Monthly</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Dashboard</li>
                </ol>
            </nav>
        </div>
        <div class="">
            <div class="man-panel">
                <div class="content-wrapper">
                    <div class="row">
                        <div class="col-md-4">
                            <form action="/admin/fromto" method="get">
                                <div class="row">
                                    <div class="col-6">
                                        <label for="FromDate">From</label>
                                        <input type="date" name="FromDate" id="expiryDate" class="form-control"
                                            value="{{date.FromDate}}">
                                    </div>
                                    <div class="col-6">
                                        <label for="ToDate">To</label>
                                        <input type="date" name="ToDate" id="expiryDate" class="form-control"
                                            value="{{date.ToDate}}">
                                    </div>
                                    <button type="submit" hidden></button>
                                </div>
                            </form>
                        </div>
                        <div class="col-md-4">
                            <form action="/admin/monthly" method="get">
                                <div class="row">
                                    <div class="col-12">
                                        <label for="month">Month</label>
                                        <input type="month" name="month" id="monthly" class="form-control"
                                            value="{{cdate.month}}">
                                    </div>
                                    <button type="submit" hidden></button>
                                </div>
                            </form>
                        </div>
                        <div class="col-md-4">
                            <form action="/admin/salesyearly" method="get">
                                <div class="row">
                                    <div class="col-12">
                                        <label for="yearly">Year</label>
                                        <input type="number" name="yearly" id="yearly" class="form-control"
                                            value="{{cyear.yearly}}">
                                    </div>
                                    <button type="submit" hidden></button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="row m-5">
                    <div class="text-center">
                        <h4>Sales Report</h4>
                    </div>
                    <table class="table table-striped m-4 " id="userData">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">No.</th>
                                <th scope="col">Month</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody class="table-group-divider">
                            {{#each Data}}
                            <tr>
                                <td></td>
                                <td>{{this._id}}</td>
                                <td>{{this.quantity}}</td>
                                <td class="total">{{this.total}}</td>
                                {{/each}}
                            </tr>
                        </tbody>
                        <tfoot class="table-dark">
                            <tr>
                                <td>Total</td>
                                <td></td>
                                <td></td>
                                <td id="sum"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <!-- content-wrapper ends -->

                          
            </div>


        </div>
        {{>adminjs}}
        <script type="text/javascript" charset="utf8"
            src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.3.2/js/dataTables.buttons.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.print.min.js"></script>
        <script>
            $(document).ready(function () {
                $('#userData').DataTable({
                    dom: 'Bfrtip',
                    buttons: [
                        'csv', 'excel', 'pdf', 'print'
                    ]
                });
            });
        </script>
        <script>
            var GrandTotal = 0
            let total = document.querySelectorAll('.total')
            total.forEach((elemnt) => {
                let value = parseInt(elemnt.innerHTML)
                GrandTotal += value
            })
            document.getElementById('sum').innerHTML = GrandTotal
        </script>
        <script>
            var table = document.getElementsByTagName('table')[0],
                rows = table.getElementsByTagName('tr'),
                text = 'textContent' in document ? 'textContent' : 'innerText';

            for (var i = 1, len = rows.length; i < len; i++) {
                rows[i].children[0][text] = i + ' ' + rows[i].children[0][text];
            }
        </script>